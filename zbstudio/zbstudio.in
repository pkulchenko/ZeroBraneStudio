#!/usr/bin/env sh

# Stash the current PWD so we can pass it to the IDE, the
# IDE itself will be launched from it's own location
CWD="$PWD"

# Figure out which architecture binary is approprate for the host system
case $(uname -m) in
    *64) ARCH="x64" ;;
    *) ARCH="x86" ;;
esac

# Lua executable to run, can be overridden with ENV variable
: ${LUA_EXECUTABLE:="bin/linux/$ARCH/lua"}

cd "@IDE_DATADIR@"
exec "$LUA_EXECUTABLE" src/main.lua zbstudio -cwd "$CWD" "$@"
